import streamlit as st
from contador_carros import contar_carros
import os

#------------ Caminho do vÃ­deo de entrada (deve estar dentro da pasta 'video/')
CAMINHO_VIDEO = "video/5927708-hd_1080_1920_30fps.mp4"

st.set_page_config(page_title="ðŸš— Contador de Carros", layout="centered")
st.title("ðŸš— Contador de Carros em VÃ­deo (Streamlit + YOLOv8)")

#------------ Verifica se o vÃ­deo existe no caminho esperado
if not os.path.exists(CAMINHO_VIDEO):
    st.error("O vÃ­deo nÃ£o foi encontrado. Verifique se estÃ¡ em 'video/5927708-hd_1080_1920_30fps.mp4'")
else:
    quadro_stream = st.empty()

    with st.spinner("Processando vÃ­deo, aguarde..."):
        for imagem in contar_carros(CAMINHO_VIDEO):
            quadro_stream.image(imagem, channels="BGR")

    st.success("VÃ­deo finalizado.")
